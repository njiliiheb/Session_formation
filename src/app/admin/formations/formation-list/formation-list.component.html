<div class="formation-list-container">
  <div class="header">
    <h1>Gestion des Formations</h1>
    <button mat-raised-button color="primary" (click)="addFormation()">
      <mat-icon>add_circle</mat-icon>
      Ajouter une formation
    </button>
  </div>

  <mat-card *ngIf="formations.length > 0">
    <table mat-table [dataSource]="formations" class="formations-table">
      <ng-container matColumnDef="titre">
        <th mat-header-cell *matHeaderCellDef>Titre</th>
        <td mat-cell *matCellDef="let formation">
          <strong>{{ formation.titre }}</strong>
          <p class="description">{{ formation.description | slice:0:100 }}...</p>
        </td>
      </ng-container>

      <ng-container matColumnDef="niveau">
        <th mat-header-cell *matHeaderCellDef>Niveau</th>
        <td mat-cell *matCellDef="let formation">
          <mat-chip>{{ formation.niveau }}</mat-chip>
        </td>
      </ng-container>

      <ng-container matColumnDef="chargeHoraire">
        <th mat-header-cell *matHeaderCellDef>Charge Horaire</th>
        <td mat-cell *matCellDef="let formation">{{ formation.chargeHoraire }}h</td>
      </ng-container>

      <ng-container matColumnDef="categories">
        <th mat-header-cell *matHeaderCellDef>Catégories</th>
        <td mat-cell *matCellDef="let formation">
          <mat-chip-set>
            <mat-chip *ngFor="let cat of formation.categories.slice(0, 2)">
              {{ cat }}
            </mat-chip>
          </mat-chip-set>
        </td>
      </ng-container>

      <ng-container matColumnDef="actions">
        <th mat-header-cell *matHeaderCellDef>Actions</th>
        <td mat-cell *matCellDef="let formation">
          <button mat-icon-button (click)="viewProgramme(formation.programmePdf)" matTooltip="Voir programme">
            <mat-icon>description</mat-icon>
          </button>
          <button mat-icon-button color="primary" (click)="editFormation(formation)" matTooltip="Modifier">
            <mat-icon>edit</mat-icon>
          </button>
          <button mat-icon-button color="warn" (click)="deleteFormation(formation)" matTooltip="Supprimer">
            <mat-icon>delete</mat-icon>
          </button>
        </td>
      </ng-container>

      <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
      <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
    </table>
  </mat-card>

  <div *ngIf="formations.length === 0" class="no-data">
    <mat-icon>school_off</mat-icon>
    <p>Aucune formation enregistrée.</p>
    <button mat-raised-button color="primary" (click)="addFormation()">
      Créer la première formation
    </button>
  </div>
</div>
